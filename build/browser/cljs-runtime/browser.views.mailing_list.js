goog.provide('browser.views.mailing_list');
var module$node_modules$axios$dist$browser$axios_cjs=shadow.js.require("module$node_modules$axios$dist$browser$axios_cjs", {});
browser.views.mailing_list.form_state = reagent.core.atom.cljs$core$IFn$_invoke$arity$1(cljs.core.PersistentArrayMap.EMPTY);
browser.views.mailing_list.on_change = (function browser$views$mailing_list$on_change(key,event){
return cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$4(browser.views.mailing_list.form_state,cljs.core.assoc,key,event.target.value);
});
browser.views.mailing_list.api_base = (cljs.core.truth_(goog.DEBUG)?"http://localhost:9000":"");
browser.views.mailing_list.send_email = (function browser$views$mailing_list$send_email(form_state,ev){
ev.preventDefault();

cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$variadic(form_state,cljs.core.assoc,new cljs.core.Keyword(null,"sending?","sending?",59171526),true,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,"language","language",-1591107564),cljs.core.first(clojure.string.split.cljs$core$IFn$_invoke$arity$2(navigator.language,"-"))], 0));

return module$node_modules$axios$dist$browser$axios_cjs.post([browser.views.mailing_list.api_base,"/.netlify/functions/mailing-list"].join(''),cljs.core.clj__GT_js(cljs.core.deref(form_state))).then((function (){
return cljs.core.reset_BANG_(form_state,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"sent?","sent?",1251086682),true], null));
})).catch((function (error){
return cljs.core.swap_BANG_.cljs$core$IFn$_invoke$arity$variadic(form_state,cljs.core.assoc,new cljs.core.Keyword(null,"error?","error?",-460689159),true,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,"sending?","sending?",59171526),false], 0));
}));
});
browser.views.mailing_list.form = (function browser$views$mailing_list$form(){
return new cljs.core.PersistentVector(null, 7, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"form","form",-1624062471),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"class","class",-2030961996),"contact__form",new cljs.core.Keyword(null,"on-submit","on-submit",1227871159),cljs.core.partial.cljs$core$IFn$_invoke$arity$2(browser.views.mailing_list.send_email,browser.views.mailing_list.form_state)], null),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"label","label",1718410804),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"for","for",-1323786319),"email",new cljs.core.Keyword(null,"class","class",-2030961996),"contact__label"], null),"Email *",new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input","input",556931961),new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,"id","id",-1388402092),"email",new cljs.core.Keyword(null,"type","type",1174270348),"email",new cljs.core.Keyword(null,"class","class",-2030961996),"contact__input",new cljs.core.Keyword(null,"required","required",1807647006),true,new cljs.core.Keyword(null,"value","value",305978217),(function (){var fexpr__33765 = cljs.core.deref(browser.views.mailing_list.form_state);
return (fexpr__33765.cljs$core$IFn$_invoke$arity$1 ? fexpr__33765.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"email_address","email_address",-2066530117)) : fexpr__33765.call(null,new cljs.core.Keyword(null,"email_address","email_address",-2066530117)));
})(),new cljs.core.Keyword(null,"on-change","on-change",-732046149),cljs.core.partial.cljs$core$IFn$_invoke$arity$2(browser.views.mailing_list.on_change,new cljs.core.Keyword(null,"email_address","email_address",-2066530117))], null)], null)], null),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"label","label",1718410804),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"for","for",-1323786319),"name",new cljs.core.Keyword(null,"class","class",-2030961996),"contact__label"], null),"Nombre ",new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"small","small",2133478704),"(opcional)"], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"input","input",556931961),new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"id","id",-1388402092),"name",new cljs.core.Keyword(null,"type","type",1174270348),"text",new cljs.core.Keyword(null,"class","class",-2030961996),"contact__input",new cljs.core.Keyword(null,"value","value",305978217),(function (){var fexpr__33766 = cljs.core.deref(browser.views.mailing_list.form_state);
return (fexpr__33766.cljs$core$IFn$_invoke$arity$1 ? fexpr__33766.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"name","name",1843675177)) : fexpr__33766.call(null,new cljs.core.Keyword(null,"name","name",1843675177)));
})(),new cljs.core.Keyword(null,"on-change","on-change",-732046149),cljs.core.partial.cljs$core$IFn$_invoke$arity$2(browser.views.mailing_list.on_change,new cljs.core.Keyword(null,"name","name",1843675177))], null)], null)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"button","button",1456579943),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"class","class",-2030961996),"button",new cljs.core.Keyword(null,"disabled","disabled",-1529784218),(function (){var fexpr__33767 = cljs.core.deref(browser.views.mailing_list.form_state);
return (fexpr__33767.cljs$core$IFn$_invoke$arity$1 ? fexpr__33767.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"sending?","sending?",59171526)) : fexpr__33767.call(null,new cljs.core.Keyword(null,"sending?","sending?",59171526)));
})()], null),"Enviar"], null),(cljs.core.truth_((function (){var fexpr__33769 = cljs.core.deref(browser.views.mailing_list.form_state);
return (fexpr__33769.cljs$core$IFn$_invoke$arity$1 ? fexpr__33769.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"sent?","sent?",1251086682)) : fexpr__33769.call(null,new cljs.core.Keyword(null,"sent?","sent?",1251086682)));
})())?new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"text-align","text-align",1786091845),"center"], null)], null),"Thanks for subscribing!"], null):null),(cljs.core.truth_((function (){var fexpr__33771 = cljs.core.deref(browser.views.mailing_list.form_state);
return (fexpr__33771.cljs$core$IFn$_invoke$arity$1 ? fexpr__33771.cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"error?","error?",-460689159)) : fexpr__33771.call(null,new cljs.core.Keyword(null,"error?","error?",-460689159)));
})())?new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"text-align","text-align",1786091845),"center"], null),new cljs.core.Keyword(null,"class","class",-2030961996),"text-red"], null),"There was an error when trying to subscribe or maybe you are already subscribed. If not, please try again."], null):null)], null);
});
browser.views.mailing_list.main = (function browser$views$mailing_list$main(app_state){
return browser.views.helpers.page_container("contact pt-40",new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h1","h1",-1896887462),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),"contact__ttl"], null),"Mailing list"], null),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),"contact__p mb-20 text-center"], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"p","p",151049309),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"class","class",-2030961996),"mb-20"], null),"Suscr\u00EDbete para recibir nueva m\u00FAsica, noticias, textos y otras cosas."], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"small","small",2133478704),"Me compromento a mandar s\u00F3lo contenido de calidad, aproximadamente cada dos meses."], null)], null),browser.views.mailing_list.form()], null));
});

//# sourceMappingURL=browser.views.mailing_list.js.map
